## 日記

### 問題概要

H \times W の盤面が与えられる。
いくつかのマスには水晶が置いてあり、それぞれの水晶は照らされるべき色を持つ。
色は赤/黄/青のprimary colorsとそのうちふたつの和である緑/紫/橙 secondary colorsのどれか。 白や茶色が指定されることはない。
4方向への赤/黄/青の光源、90度で反射させる鏡、光を吸収する障害物を、費用を支払っていくつか設置できる。
raw scoreはprimary/secondary colorsの水晶を適切な色で照らすとそれぞれ20/30点、間違った色で照らすと常に-10点、照らされなかった水晶は0点、使用した費用の分だけ減点。
overall scoreは各ケースにおける順位の総和と見てよいもの。

制約:

-   10 \le H, W \le 100
-   障害物は 5 ~ 15% 配置される
-   水晶は 15 ~ 25% 配置される
-   色は 1 ~ 6
-   光源の費用は 1 ~ 10点
-   鏡の費用は 3 ~ 30点
-   障害物の費用は 2 ~ 20点
-   鏡の設置上限は 0 ~ (水晶の数)/8
-   障害物の設置上限は 0 ~ (水晶の数)/16
-   すべて一様分布

細則:

-   光源は光を通さない

![example 0](https://www.topcoder.com/contest/problem/CrystalLighting/1.png)


### 2018年  6月  7日 木曜日 10:08:30 JST

撤退しようかなと考えていたのに開始後すぐ問題を見てしまうのほんとだめ。
指の怪我とか試験とか海外旅行とかでかなり厳しいのに正気か？

[RYB color model](https://en.wikipedia.org/wiki/RYB_color_model) 初耳。 CMYじゃだめだったのか。
forumにてRYBは減法混合の原色だが光は加法混合されるし実際そう計算しろと書いてあるので矛盾だよねという指摘: <https://apps.topcoder.com/forums/?module=Thread&threadID=919192&start=0>。
そういえばそれはそう。 頭付いてないので読み流してしまったし実質誤読。


### 2018年  6月  7日 木曜日 10:39:20 JST

読んだ。 なんというか戦いやすい。 CodeVSとかでありそう。
しかしこれだと1位が取れることはまずない。 もともとほぼないけど。
搦手が効かずルールベース寄り。 ビームは弾かれそうだが火は通るのだろうか。 探索力で押し負けそう。

前処理として白色(つまり光を当ててはいけない)水晶を導入したい。
ここに光源を置くのとそこに置くのは同じ、ここに置くならそこに置くのは無意味、といった依存関係のグラフ作っておきたい。
迷路とか数独を解くような感じ。
となるとSATか？
焼くのと違って学習があるし効きそうだけど分からん。
鏡や障害物の出番あるのか？ まああるだろうがまずはなしで考えてもよさそう。

設置物を関連してる光線と平行に動かす近傍や、光源の色の変化、鏡と障害物の置き換え、光源ふたつの色の交換あたりが近傍として有力そう。
単純には設置と削除。 設置と削除を同時にやる近傍もあるが、局所性に注意しないとだめそう。

局所性。
最後まで2次元平面でやるのだろうか。 いい感じにグラフに落としてしまいたい。
諸々を解く際に局所的に解けないか。 接続部分が悪くても探索空間が広ければ加速分で元が取れるかも。
しかし狭そう。 だとするとビームサーチもありなのかも。 上からDP的に決めていく感じで。

とりあえず貪欲なり雑な焼き鈍しを実装して様子を見たい。
ところでRYBだと矛盾する話の処理はどうしよう。 修正してもしなくても混乱を生むの勘弁して。


### 2018年  6月  7日 木曜日 10:53:11 JST

数学
